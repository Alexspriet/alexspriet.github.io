<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baldur's Gate 3 - Class Randomizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* A dark, BG3-like background */
        }
        .title-font {
            font-family: 'Cinzel', serif;
        }
        .card-container {
            perspective: 1000px;
        }
        .card {
            transition: transform 0.6s, box-shadow 0.3s;
            transform-style: preserve-3d;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        .card.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden; /* Safari */
        }
        .card-back {
            transform: rotateY(180deg);
        }
        @keyframes card-tumble {
            0% {
                transform: rotateY(0);
            }
            100% {
                transform: rotateY(1080deg);
            }
        }
        .is-rolling {
            animation: card-tumble 1.5s ease-in-out;
        }
        .btn-custom-2 {
            transition: all 0.3s ease;
        }
        .btn-custom {
            transition: all 0.3s ease;
            box-shadow: 0px 4px 15px rgba(217, 119, 6, 0.4);
        }
        .btn-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0px 6px 20px rgba(217, 119, 6, 0.6);
        }
        .btn-custom:active {
            transform: translateY(1px);
        }
        #title-toggle {
            cursor: pointer;
            transition: all 0.3s ease;
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10+ */
            user-select: none; /* Standard syntax */
        }
        .title-toggle-active {
            opacity: 0.75; /* Subtle opacity instead of glow */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 min-h-screen flex flex-col items-center justify-center p-4">

    <div class="w-full max-w-5xl mx-auto text-center">
        <!-- Header Section -->
        <header class="mb-8">
            <h1 class="title-font text-4xl md:text-6xl font-bold text-amber-300 tracking-wider">Baldur's Gate <span id="title-toggle" title="Toggle Warlock mode for Alex">3</span></h1>
            <p class="text-xl md:text-2xl text-gray-400 mt-2">Class Randomizer</p>
        </header>

        <!-- Player Cards Section -->
        <main id="players-container" class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 mb-10">
            <!-- Player 1 Card -->
            <div id="player-1" class="card-container h-80">
                <div class="card relative w-full h-full">
                    <div class="card-face card-front absolute w-full h-full bg-gray-800 border-2 border-amber-500/30 rounded-lg p-6 flex flex-col justify-center items-center">
                        <h2 class="title-font text-3xl text-gray-400">Alex</h2>
                        <p class="text-gray-500 mt-2">Waiting for roll...</p>
                    </div>
                    <div class="card-face card-back absolute w-full h-full bg-gray-800 border-2 rounded-lg p-6 flex flex-col justify-between items-center">
                        <!-- Content will be injected by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Player 2 Card -->
            <div id="player-2" class="card-container h-80">
                <div class="card relative w-full h-full">
                     <div class="card-face card-front absolute w-full h-full bg-gray-800 border-2 border-amber-500/30 rounded-lg p-6 flex flex-col justify-center items-center">
                        <h2 class="title-font text-3xl text-gray-400">Ben</h2>
                         <p class="text-gray-500 mt-2">Waiting for roll...</p>
                    </div>
                    <div class="card-face card-back absolute w-full h-full bg-gray-800 border-2 rounded-lg p-6 flex flex-col justify-between items-center">
                        <!-- Content will be injected by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Player 3 Card -->
            <div id="player-3" class="card-container h-80">
                <div class="card relative w-full h-full">
                     <div class="card-face card-front absolute w-full h-full bg-gray-800 border-2 border-amber-500/30 rounded-lg p-6 flex flex-col justify-center items-center">
                        <h2 class="title-font text-3xl text-gray-400">Rémy</h2>
                         <p class="text-gray-500 mt-2">Waiting for roll...</p>
                    </div>
                    <div class="card-face card-back absolute w-full h-full bg-gray-800 border-2 rounded-lg p-6 flex flex-col justify-between items-center">
                        <!-- Content will be injected by JavaScript -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Button Section -->
        <footer class="mt-4 flex justify-center items-center gap-4">
            <button id="generate-btn" class="btn-custom bg-amber-600 text-gray-900 font-bold title-font tracking-wider text-xl py-4 px-10 rounded-lg">
                Assign Classes
            </button>
            <button id="reset-btn" title="Reset" class="btn-custom-2 bg-gray-700 hover:bg-gray-600 text-gray-300 p-4 rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64M3.51 15A9 9 0 0 0 18.36 18.36"></path></svg>
            </button>
        </footer>
    </div>

<script>
    const bg3Classes = [
        {
            name: "Barbarian",
            description: "A fierce warrior who can enter a battle rage.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H18a2 2 0 0 1 2 2v2.5a2 2 0 0 1-2 2h-3.5"/><path d="M9.5 22H6a2 2 0 0 1-2-2V17.5a2 2 0 0 1 2-2h3.5"/><path d="M3 10h18"/><path d="M12 2v20"/></svg>`,
            color: "border-red-500",
            textColor: "text-red-400"
        },
        {
            name: "Bard",
            description: "An inspiring magician whose power echoes the music of creation.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 8 4-4 4 4"/><path d="M12 12v8"/><path d="M16 12v8"/><path d="M8 22a4.2 4.2 0 0 0-4-4V2"/><path d="M8 12.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9z"/></svg>`,
            color: "border-pink-500",
            textColor: "text-pink-400"
        },
        {
            name: "Cleric",
            description: "A priestly champion who wields divine magic in service of a higher power.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 6v12"/><path d="M18.36 6.64a9 9 0 1 1-12.72 0"/><path d="M6.64 18.36a9 9 0 0 0 12.72 0"/></svg>`,
            color: "border-yellow-400",
            textColor: "text-yellow-300"
        },
        {
            name: "Druid",
            description: "A priest of the Old Faith, wielding the powers of nature and adopting animal forms.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.5 20.5 2 12l8.5-8.5"/><path d="m15 12-5-5"/><path d="M22 12h-7"/></svg>`,
            color: "border-green-500",
            textColor: "text-green-400"
        },
        {
            name: "Fighter",
            description: "A master of martial combat, skilled with a variety of weapons and armor.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m14.5 2-4.5 4.5 4.5 4.5 4.5-4.5-4.5-4.5z"/><path d="m3 21 4.5-4.5"/><path d="m13 11 4.5 4.5"/><path d="m10 14 4.5 4.5"/><path d="m21 3-4.5 4.5"/><path d="M4.2 11.5 3 21l9.5-1.2"/><path d="m11.5 4.2-1.2 9.5 9.5-1.2"/></svg>`,
            color: "border-orange-500",
            textColor: "text-orange-400"
        },
        {
            name: "Monk",
            description: "A master of martial arts, harnessing the power of the body in pursuit of physical and spiritual perfection.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18.8 17.8a1.5 1.5 0 0 0 1.4-1.4 1.5 1.5 0 0 0-1.4-1.4H16V12h1.5a1.5 1.5 0 0 0 1.4-1.4 1.5 1.5 0 0 0-1.4-1.4H16V8h1.5a1.5 1.5 0 0 0 1.4-1.4A1.5 1.5 0 0 0 17.5 5H16V3.5a1.5 1.5 0 0 0-1.5-1.5 1.5 1.5 0 0 0-1.5 1.5V5H12V3.5A1.5 1.5 0 0 0 10.5 2 1.5 1.5 0 0 0 9 3.5V5H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-2.2"/><path d="M12 8v4h4"/></svg>`,
            color: "border-cyan-500",
            textColor: "text-cyan-400"
        },
        {
            name: "Paladin",
            description: "A holy warrior bound to a sacred oath.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0-6 6v6h12v-6a6 6 0 0 0-6-6Z"/><path d="M12 15v6"/><path d="M8 21h8"/></svg>`,
            color: "border-amber-400",
            textColor: "text-amber-300"
        },
        {
            name: "Ranger",
            description: "A warrior who uses martial prowess and nature magic to combat threats on the edges of civilization.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 11l5-5-5-5"/><path d="M20 6H4.5a2.5 2.5 0 0 0-2.5 2.5v10a2.5 2.5 0 0 0 2.5 2.5H15"/><path d="M12 11h8"/></svg>`,
            color: "border-lime-500",
            textColor: "text-lime-400"
        },
        {
            name: "Rogue",
            description: "A scoundrel who uses stealth and trickery to overcome obstacles and enemies.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a5 5 0 0 0-5 5c0 1.6.8 3 2 4H7a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2c1.2-1 2-2.4 2-4a5 5 0 0 0-5-5z"/><path d="M12 11v11"/></svg>`,
            color: "border-gray-500",
            textColor: "text-gray-400"
        },
        {
            name: "Sorcerer",
            description: "A spellcaster who draws on inherent magic from a gift or bloodline.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4.5c.3-.3.5-.6.8-.9 1-1 2.5-1 3.5 0 1 1 1 2.5 0 3.5l-6.8 6.8c-.5.5-1.2 1.2-2 1.7-.8.5-1.7 1-2.5 1.5s-1.5 1-2.5 1.5c-1 .5-2 1-3 1.5-.5.3-.9.5-1.4.8-1 1-1 2.5 0 3.5 1 1 2.5 1 3.5 0l6.8-6.8c.5-.5 1.2-1.2 2-1.7.8-.5 1.7-1 2.5-1.5s1.5-1 2.5-1.5c1-.5 2-1 3-1.5.5-.3.9-.5 1.4-.8Z"/><path d="m5 19 6-6"/><path d="m9 15 6-6"/></svg>`,
            color: "border-blue-500",
            textColor: "text-blue-400"
        },
        {
            name: "Warlock",
            description: "A wielder of magic that is derived from a bargain with an extraplanar entity.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5c4.97 0 9 4.03 9 9s-4.03 9-9 9-9-4.03-9-9 4.03-9 9-9z"/><path d="M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/><path d="M12 2v3"/><path d="M22 12h-3"/><path d="M12 22v-3"/><path d="M2 12h3"/></svg>`,
            color: "border-purple-500",
            textColor: "text-purple-400"
        },
        {
            name: "Wizard",
            description: "A scholarly magic-user capable of manipulating the structures of reality.",
            icon: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>`,
            color: "border-indigo-500",
            textColor: "text-indigo-400"
        },
    ];

    const generateBtn = document.getElementById('generate-btn');
    const resetBtn = document.getElementById('reset-btn');
    const titleToggle = document.getElementById('title-toggle');

    let forceWarlockMode = false;

    const playerElements = [
        document.querySelector('#player-1 .card'),
        document.querySelector('#player-2 .card'),
        document.querySelector('#player-3 .card')
    ];

    function toggleWarlockMode() {
        forceWarlockMode = !forceWarlockMode;
        titleToggle.classList.toggle('title-toggle-active');
        if (forceWarlockMode) {
            titleToggle.title = "Warlock mode for Alex is ON";
        } else {
            titleToggle.title = "Warlock mode for Alex is OFF";
        }
    }

    titleToggle.addEventListener('click', toggleWarlockMode);

    window.addEventListener('keydown', (event) => {
        if (event.key.toLowerCase() === 'a') {
            toggleWarlockMode();
        }
    });

    // Function to shuffle an array (Fisher-Yates shuffle)
    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }
    
    function resetCards() {
        playerElements.forEach(card => card.classList.remove('is-flipped'));
    }

    function resetGame() {
        resetCards();
        setTimeout(() => {
            playerElements.forEach((card) => {
                const cardBack = card.querySelector('.card-back');
                cardBack.innerHTML = '';
                cardBack.className = 'card-face card-back absolute w-full h-full bg-gray-800 border-2 rounded-lg p-6 flex flex-col justify-between items-center';
            });
        }, 300); // Wait for flip animation to finish
    }

    function assignClasses() {
        // Disable button during animation
        generateBtn.disabled = true;
        generateBtn.textContent = 'Rolling...';
        generateBtn.classList.add('opacity-50', 'cursor-not-allowed');
        
        resetCards();
        
        setTimeout(() => { // Small delay to allow un-flip animation to start if needed
            // Start the 3D roll animation
            playerElements.forEach(card => {
                card.classList.add('is-rolling');
            });

            // This timeout waits for the roll to finish before preparing and flipping the cards
            setTimeout(() => {
                let selectedClasses;
                const shuffledClasses = shuffleArray([...bg3Classes]);

                if (forceWarlockMode) {
                    const warlockClass = bg3Classes.find(c => c.name === "Warlock");
                    const otherClasses = shuffledClasses.filter(c => c.name !== "Warlock");
                    // Assign Warlock to Alex, and two other random classes to Ben and Rémy
                    selectedClasses = [
                        warlockClass,
                        otherClasses[0],
                        otherClasses[1]
                    ];
                } else {
                    // Default behavior
                    selectedClasses = shuffledClasses.slice(0, 3);
                }
        
                playerElements.forEach((card, index) => {
                    const playerClass = selectedClasses[index];
                    const cardBack = card.querySelector('.card-back');
        
                    cardBack.className = `card-face card-back absolute w-full h-full bg-gray-800 border-2 rounded-lg p-6 flex flex-col justify-center items-center text-center ${playerClass.color}`;
        
                    cardBack.innerHTML = `
                        <div class="flex-grow flex flex-col justify-center items-center">
                            <div class="${playerClass.textColor}">${playerClass.icon}</div>
                            <h3 class="title-font text-2xl font-bold mt-4 ${playerClass.textColor}">${playerClass.name}</h3>
                            <p class="text-sm text-gray-400 mt-2">${playerClass.description}</p>
                        </div>
                    `;
                    
                    // Stop the rolling animation and start the flip
                    card.classList.remove('is-rolling');
                    setTimeout(() => {
                        card.classList.add('is-flipped');
                    }, index * 200);
                });
                
                // Re-enable button after animation is complete
                const totalAnimationTime = 600 + (playerElements.length - 1) * 200;
                setTimeout(() => {
                    generateBtn.disabled = false;
                    generateBtn.textContent = 'Assign Classes';
                    generateBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                }, totalAnimationTime);
                
            }, 1500); // This duration must match the roll animation time

        }, 100);
    }

    generateBtn.addEventListener('click', assignClasses);
    resetBtn.addEventListener('click', resetGame);
</script>

</body>
</html>





